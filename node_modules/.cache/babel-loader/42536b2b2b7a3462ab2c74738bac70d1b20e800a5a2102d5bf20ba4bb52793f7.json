{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import'./signin.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Usuarios=()=>{const navigate=useNavigate();// Inicializar table como un array vacío\nconst[table,setTable]=useState([]);// Actualizar tabla de usuarios\nasync function getUsers(){try{const request=await fetch('https://loginexpress-production-1f75.up.railway.app/usuarios',{credentials:'include'});if(request.ok){const answer=await request.json();console.log(\"Usuarios recibidos:\",answer);setTable(answer);}else{console.error(\"Error en la petición:\",await request.text());}}catch(error){console.error(\"Error obteniendo usuarios:\",error);}}async function deleteUser(id){try{const request=await fetch('https://loginexpress-production-1f75.up.railway.app/usuarios?id='+id,{credentials:'include',method:'DELETE'});if(request.ok){const answer=await request.json();alert(\"Usuario eliminado con exito\");setTable(answer);}}catch(error){console.error(\"Error eliminando usuarios:\",error);}}useEffect(()=>{async function checkAuth(){try{const request=await fetch('https://loginexpress-production-1f75.up.railway.app/validate',{credentials:'include'});if(request.ok){getUsers();// Cargar usuarios si está autenticado\n}else{// Si no está autenticado, redirigir al login\nnavigate('/signin');}}catch(error){console.error(\"Error validando sesión:\",error);navigate('/signin');}}// Verificar autenticación al cargar el componente\ncheckAuth();},[navigate]);return/*#__PURE__*/_jsxs(\"div\",{className:\"signin-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/img/logo_coffee_background.png\",alt:\"logo\",className:\"header-image\"}),/*#__PURE__*/_jsx(\"div\",{className:\"forms-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"table-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Registered Users\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"users-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:table.length>0?table.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.id}),/*#__PURE__*/_jsx(\"td\",{children:user.correo_electronico}),/*#__PURE__*/_jsx(\"td\",{children:user.contraseña}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{deleteUser(user.id);},children:\"X\"})})]},user.id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",children:\"No hay usuarios registrados\"})})})]})]})})]});};export default Usuarios;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Usuarios","navigate","table","setTable","getUsers","request","fetch","credentials","ok","answer","json","console","log","error","text","deleteUser","id","method","alert","checkAuth","className","children","src","alt","length","map","user","correo_electronico","contraseña","onClick","colSpan"],"sources":["C:/Users/Flia_PoloGarcia/Desktop/OSNEIDER_POLO_AA5_EV01/src/usuarios.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './signin.css';\r\n\r\nconst Usuarios = () => {\r\n  const navigate = useNavigate();\r\n  \r\n  // Inicializar table como un array vacío\r\n  const [table, setTable] = useState([]);\r\n\r\n  // Actualizar tabla de usuarios\r\n  async function getUsers() {\r\n    try {\r\n      const request = await fetch('https://loginexpress-production-1f75.up.railway.app/usuarios', {\r\n        credentials: 'include'\r\n      });\r\n      \r\n      if (request.ok) {\r\n        const answer = await request.json();\r\n        console.log(\"Usuarios recibidos:\", answer);\r\n        setTable(answer);\r\n      } else {\r\n        console.error(\"Error en la petición:\", await request.text());\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error obteniendo usuarios:\", error);\r\n    }\r\n  }\r\n\r\n  async function deleteUser(id) {\r\n    try {\r\n      const request = await fetch('https://loginexpress-production-1f75.up.railway.app/usuarios?id='+id, {\r\n        credentials: 'include', \r\n        method: 'DELETE'\r\n      });\r\n      \r\n      if (request.ok) {\r\n        const answer = await request.json();\r\n        alert(\"Usuario eliminado con exito\")\r\n        setTable(answer);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error eliminando usuarios:\", error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function checkAuth() {\r\n      try {\r\n        const request = await fetch('https://loginexpress-production-1f75.up.railway.app/validate', {\r\n          credentials: 'include'\r\n        });\r\n        \r\n        if (request.ok) {\r\n          getUsers(); // Cargar usuarios si está autenticado\r\n        } else {\r\n          // Si no está autenticado, redirigir al login\r\n          navigate('/signin');\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error validando sesión:\", error);\r\n        navigate('/signin');\r\n      }\r\n    }\r\n    \r\n    // Verificar autenticación al cargar el componente\r\n    checkAuth();\r\n  }, [navigate]);\r\n\r\n  return (\r\n    <div className=\"signin-container\">\r\n      <img \r\n        src=\"/img/logo_coffee_background.png\" \r\n        alt=\"logo\" \r\n        className=\"header-image\" \r\n      />\r\n      \r\n      <div className=\"forms-container\">\r\n        {/* Tabla de usuarios registrados */}\r\n        <div className=\"table-container\">\r\n          <h2>Registered Users</h2>\r\n          <table className='users-table'>\r\n            <thead>\r\n              <tr>\r\n                <th>ID</th>\r\n                <th>Email</th>\r\n                <th>Password</th>\r\n                <th>Delete</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {table.length > 0 ? (\r\n                table.map(user => (\r\n                  <tr key={user.id}>\r\n                    <td>{user.id}</td>\r\n                    <td>{user.correo_electronico}</td>\r\n                    <td>{user.contraseña}</td>\r\n                    <td>\r\n                      <button onClick={()=>{deleteUser(user.id)}}>X</button>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              ) : (\r\n                <tr>\r\n                  <td colSpan=\"4\">No hay usuarios registrados</td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Usuarios;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}